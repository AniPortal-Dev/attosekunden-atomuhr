<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Atomuhr bis Attosekunden</title>
  <style>
    body {
      background: #0a0a0a;
      color: #0affff;
      font-family: 'Courier New', monospace;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      font-size: 2em;
    }
    .clock {
      display: flex;
      gap: 10px;
    }
    .unit {
      min-width: 60px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="clock">
    <div class="unit" id="minutes">00</div>:
    <div class="unit" id="seconds">00</div>:
    <div class="unit" id="milliseconds">000</div>:
    <div class="unit" id="microseconds">000</div>:
    <div class="unit" id="nanoseconds">000</div>:
    <div class="unit" id="picoseconds">000</div>:
    <div class="unit" id="femtoseconds">000</div>:
    <div class="unit" id="attoseconds">000</div>
  </div>

  <script>
    const ntpServer = 'pool.ntp.org';

    function pad(num, size) {
      let s = "000" + num;
      return s.substr(s.length - size);
    }

    async function fetchNtpTime() {
      try {
        const response = await fetch(`https://worldtimeapi.org/api/timezone/Etc/UTC`);
        const data = await response.json();
        const serverTime = new Date(data.utc_datetime);
        return serverTime;
      } catch (error) {
        console.error('Fehler beim Abrufen der NTP-Zeit:', error);
        return new Date();
      }
    }

    function updateClock() {
      fetchNtpTime().then(serverTime => {
        const now = performance.now();
        const elapsed = now - start; // Millisekunden seit Start

        const minutes = serverTime.getUTCMinutes();
        const seconds = serverTime.getUTCSeconds();
        const ms = serverTime.getUTCMilliseconds();

        let totalNano = Math.floor(elapsed * 1e6); // 1ms = 1e6 ns
        const micro = Math.floor(totalNano / 1000) % 1000;
        const nano = totalNano % 1000;
        const pico = Math.floor(totalNano * 1e3) % 1000;
        const femto = Math.floor(totalNano * 1e6) % 1000;
        const atto = Math.floor(totalNano * 1e9) % 1000;

        document.getElementById('minutes').textContent = pad(minutes, 2);
        document.getElementById('seconds').textContent = pad(seconds, 2);
        document.getElementById('milliseconds').textContent = pad(ms, 3);
        document.getElementById('microseconds').textContent = pad(micro, 3);
        document.getElementById('nanoseconds').textContent = pad(nano, 3);
        document.getElementById('picoseconds').textContent = pad(pico, 3);
        document.getElementById('femtoseconds').textContent = pad(femto, 3);
        document.getElementById('attoseconds').textContent = pad(atto, 3);

        requestAnimationFrame(updateClock);
      });
    }

    const start = performance.now();
    updateClock();
  </script>
</body>
</html>
